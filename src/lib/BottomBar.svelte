<script>
  import { getContext } from 'svelte';

  export let fontSize = 15;
  export let notes = [];

  const width = getContext('width');
  const height = getContext('height');
  const notesOffset = 10.25;

  let lineSpacing = 1.1;
  export let barHeight = 0;
  $: barHeight = Math.max(notesOffset * 2 + fontSize * lineSpacing * notes.length, 40);
</script>
<svelte:options accessors />
<g transform={ `translate(0 ${ ($height || 0) - barHeight })` }>
  <line x2={ width } stroke='#001e62' stroke-width='2' />
  <g
    transform={ `translate(${ width - 60} 10)` }
    fill="#001e62"
  >
    <g>
      <path
        d="m 0,0 c 2.4,0 4.6,0.9 6.3,2.6 1.7,1.7 2.6,3.9 2.6,6.3 0,2.4 -0.9,4.6 -2.5,6.2 -1.8,1.7 -4,2.6 -6.3,2.6 -2.3,0 -4.5,-0.9 -6.2,-2.6 -1.7,-1.7 -2.6,-3.9 -2.6,-6.2 0,-2.3 1,-4.6 2.6,-6.3 1.5,-1.7 3.6,-2.6 6.1,-2.6 m -0.1,-2 c -3,0 -5.6,1.1 -7.6,3.1 -2.1,2.1 -3.2,4.8 -3.2,7.7 0,2.9 1.1,5.6 3.2,7.6 2.1,2.1 4.8,3.2 7.6,3.2 2.9,0 5.6,-1.1 7.8,-3.2 2,-2 3.1,-4.6 3.1,-7.6 0,-2.9 -1.1,-5.6 -3.1,-7.7 -2.1,-2 -4.8,-3.1 -7.8,-3.1 z"
      />
      <path
        d="m 0,7.1 c -0.6,-1.1 -1.7,-1.6 -2.9,-1.6 -1.8,0 -3.2,1.3 -3.2,3.4 0,2.2 1.3,3.4 3.2,3.4 1.2,0 2.3,-0.7 2.8,-1.7 l -1.3,-0.7 c -0.3,0.7 -0.8,0.9 -1.3,0.9 -1,0 -1.5,-0.8 -1.5,-1.9 0,-1.1 0.4,-1.9 1.5,-1.9 0.3,0 0.9,0.2 1.2,0.9 l 1.5,-0.8"
      />
      <path
        d="m 6.1,7.1 c -0.6,-1.1 -1.7,-1.6 -2.9,-1.6 -1.8,0 -3.2,1.3 -3.2,3.4 0,2.2 1.3,3.4 3.2,3.4 1.2,0 2.3,-0.7 2.8,-1.7 l -1.3,-0.7 c -0.3,0.7 -0.8,0.9 -1.3,0.9 -1,0 -1.5,-0.8 -1.5,-1.9 0,-1.1 0.4,-1.9 1.5,-1.9 0.3,0 0.9,0.2 1.2,0.9 l 1.5,-0.8"
      />
    </g>
    <path
      transform='translate(50 12)'
      d="m 0,0 c -0.4,0.2 -0.8,0.3 -1.2,0.4 -0.4,0.1 -0.8,0.1 -1.3,0.1 -1.3,0 -2.4,-0.4 -3.2,-1.1 -0.8,-0.7 -1.2,-1.7 -1.2,-2.9 0,-1.2 0.4,-2.2 1.2,-2.9 0.8,-0.7 1.8,-1.1 3.2,-1.1 0.4,0 0.9,0 1.3,0.1 0.4,0.1 0.8,0.2 1.2,0.4 v 1.6 c -0.4,-0.2 -0.8,-0.4 -1.1,-0.5 -0.4,-0.1 -0.8,-0.2 -1.2,-0.2 -0.7,0 -1.3,0.2 -1.7,0.7 -0.4,0.4 -0.6,1.1 -0.6,1.8 0,0.8 0.2,1.4 0.6,1.8 0.4,0.4 1,0.7 1.7,0.7 0.4,0 0.8,-0.1 1.2,-0.2 0.4,-0.1 0.8,-0.3 1.1,-0.5 v 1.8 m -15.6,-7.1 h 2.3 l 2.9,5.2 v -5.2 h 2 v 7.5 h -2.3 l -2.9,-5.2 v 5.2 h -2 v -7.5 m -5,3.8 h 3.4 v 1.5 h -3.4 z m -7.1,-3.8 h 2.3 l 1.8,2.7 1.8,-2.7 h 2.3 l -3.1,4.4 v 3.2 h -2.1 v -3.2 l -3,-4.4 m -1.2,3.5 c 0.4,0.1 0.8,0.3 1,0.7 0.2,0.3 0.4,0.7 0.4,1.2 0,0.7 -0.3,1.3 -0.8,1.6 -0.5,0.4 -1.3,0.5 -2.4,0.5 h -3.4 v -7.5 h 3.1 c 1.1,0 1.9,0.2 2.4,0.5 0.5,0.3 0.8,0.8 0.8,1.5 0,0.4 -0.1,0.7 -0.3,0.9 -0.2,0.3 -0.5,0.5 -0.8,0.6 m -1.9,2.7 c 0.4,0 0.7,-0.1 0.9,-0.2 0.2,-0.2 0.3,-0.4 0.3,-0.8 0,-0.3 -0.1,-0.6 -0.3,-0.7 -0.2,-0.2 -0.5,-0.2 -0.9,-0.2 h -1.2 v 2 l 1.2,-0.1 m -0.1,-3.3 c 0.3,0 0.6,-0.1 0.7,-0.2 0.2,-0.1 0.3,-0.3 0.3,-0.6 0,-0.3 -0.1,-0.5 -0.3,-0.6 -0.2,-0.1 -0.4,-0.2 -0.7,-0.2 h -1.1 v 1.6 h 1.1"
    />
  </g>
  <text font-size={ fontSize } fill="#001e62" dominant-baseline="hanging" >
    {#each notes as line, idx (idx)}
    <tspan
      x="16"
      y={ notesOffset + idx * fontSize * lineSpacing }
    >{ line }</tspan>
    {/each}
  </text>
</g>